import{a as _,B as v,o as f,e as p,F as L,f as E,ak as y,r as x,p as u,w as m,s as D,al as h,am as S,l as b,t as j,D as w,G as C}from"./.store-BiC8x167.js";import"./_jsencrypt@3.3.2@jsencrypt-D3I3x59l.js";import{_ as k}from"./index-9lyiukMw.js";const B=_({__name:"index",props:{list:{type:Array,default:()=>[]}},emits:["start","end"],setup(s,{emit:l}){const i=s,r=l;v(()=>{d()});let e;function d(){let t=document.querySelector(".j-draggable");t.addEventListener("dragenter",a=>{const o=a.target,g=o.parentNode;a.dataTransfer.types[0]!=="files"&&g instanceof Element&&g.classList.contains("j-draggable")?e.offsetLeft>o.offsetLeft||e.offsetTop>o.offsetTop?t.insertBefore(e,o):t.insertBefore(e,o.nextSibling):console.log("禁止进入")}),t.addEventListener("dragleave",a=>{a.preventDefault()}),t.addEventListener("drop",a=>{r("end",a)}),t.addEventListener("dragend",a=>{a.target.style.opacity="1"}),t.addEventListener("dragover",a=>{a.preventDefault()})}function n(t){t.target.parentNode.classList.contains("j-draggable")&&(t.target.setAttribute("draggable","true"),t.target.addEventListener("dragstart",a=>{a.dataTransfer.effectAllowed="move",e=a.target,a.target.style.opacity="0.5",r("start",a)}))}function c(t){t.target.parentNode.classList.contains("j-draggable")&&t.target.setAttribute("draggable","false")}return(t,a)=>(f(),p("div",{class:"j-draggable",onMousedown:n,onMouseup:c,ref:"dragger"},[(f(!0),p(L,null,E(i.list,(o,g)=>y(t.$slots,"item",{key:g,item:o})),128))],544))}}),N=_({components:{JDraggable:B},setup(s){const l=D({list:[{id:1,name:"111"},{id:2,name:"222"},{id:3,name:"333"},{id:4,name:"444"},{id:5,name:"555"}]}),i={end(r){console.log(r)}};return v(()=>{let r=document.querySelector(".box_upload");r.addEventListener("dragstart",e=>{}),r.addEventListener("dragenter",e=>{console.log("经过",e),e.target.style.borderColor="#f69c5d",e.target.style.backgroundColor="#f69c5d"}),r.addEventListener("dragover",e=>{e.preventDefault()}),r.addEventListener("dragleave",e=>{console.log("离开",e),e.target.style.borderColor="#ccc",e.target.style.backgroundColor=""}),r.addEventListener("drop",e=>{e.preventDefault();const d=e.dataTransfer.files;console.log(d[0]);let n=new FileReader;n.readAsDataURL(d[0]),n.onload=c=>{}})}),{...h(l),...i}}}),T=s=>(w("data-v-3abf7aaf"),s=s(),C(),s),$={class:"box"},A=T(()=>b("div",{class:"box_upload"},null,-1));function M(s,l,i,r,e,d){const n=x("j-draggable");return f(),p("div",null,[u(n,{list:s.list,onEnd:s.end},{item:m(({item:c})=>[u(S,{name:"list"},{default:m(()=>[b("div",$,j(c.name),1)]),_:2},1024)]),_:1},8,["list","onEnd"]),A])}const U=k(N,[["render",M],["__scopeId","data-v-3abf7aaf"]]);export{U as default};
